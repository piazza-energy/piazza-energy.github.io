(()=>{const start=d3.now(),draw=()=>{const deltaAngle=2e-5*(d3.now()-start),sizes=(()=>{const width=Math.round(.9*Math.min(window.innerWidth,window.innerHeight)),radius=.5*width;let welcome=document.getElementById("welcome");return welcome.style.width="400px",welcome.style.top=`${Math.round(radius-130)}px`,welcome.style.left=`${Math.round(window.innerWidth/2-200)}px`,document.getElementById("canvas").style.width=`${width}px`,{width:width,radius:radius}})();((container,nodes)=>{container.selectAll().data(nodes).enter().append("image").attr("x",function(d,i){return d.x}).attr("y",function(d,i){return d.y}).attr("xlink:href",function(d,i){return d.src})})((width=>{let canvas=d3.select("#canvas");return canvas.selectAll("svg").remove(),canvas.append("svg:svg").attr("width",width).attr("height",width)})(sizes.width),((radius,deltaAngle)=>{return["battery","buildings","car","fridge","meter","plug","powerline","solar","wind"].map((value,index,array)=>{let angle=(index/(array.length/2)+deltaAngle)*Math.PI;return{value:value,src:`img/${value}.svg`,index:index,angle:angle,x:.8*radius*Math.cos(angle)+(radius-75),y:.8*radius*Math.sin(angle)+(radius-75)}})})(sizes.radius,deltaAngle))};window.addEventListener("resize",()=>{draw()}),draw();d3.timer(()=>{draw()},500)})();
